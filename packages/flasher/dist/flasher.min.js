<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).flasher=e()}(this,(function(){"use strict";function t(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var e=function(){function t(t){this.options={timeout:5e3,fps:30,position:"top-right",direction:"top",rtl:!1,style:{},darkMode:"media"},this.viewFactory=t}return t.prototype.success=function(t,e,n){this.flash("success",t,e,n)},t.prototype.info=function(t,e,n){this.flash("info",t,e,n)},t.prototype.warning=function(t,e,n){this.flash("warning",t,e,n)},t.prototype.error=function(t,e,n){this.flash("error",t,e,n)},t.prototype.flash=function(t,e,n,o){var r=this.createNotification(t,e,n,o);this.renderOptions({}),this.render({notification:r})},t.prototype.createNotification=function(t,e,n,o){if("object"==typeof t?(t=(o=t).type,e=o.message,n=o.title):"object"==typeof e?(e=(o=e).message,n=o.title):"object"==typeof n&&(n=(o=n).title),void 0===e)throw new Error("message option is required");return{type:t||"info",message:e,title:n,options:o}},t.prototype.render=function(t){var e=this,n=t.notification.options||{},o=Array.isArray(n)?this.options:Object.assign({},this.options,n),r=function(){var n=e.createContainer(o);e.addToContainer(n,t,o)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()},t.prototype.renderOptions=function(t){this.options=Object.assign({},this.options,t),this.applyDarkMode()},t.prototype.createContainer=function(t){var e='.fl-main-container[data-position="'.concat(t.position,'"]'),n=document.querySelector(e);return n?(n.dataset.turboCache="false",n):((n=document.createElement("div")).classList.add("fl-main-container"),n.dataset.position=t.position,n.dataset.turboCache="false",Object.keys(t.style).forEach((function(e){null==n||n.style.setProperty(e,t.style[e])})),document.body.append(n),n)},t.prototype.addToContainer=function(t,e,n){var o=this.stringToHTML(e.template||this.viewFactory.render(e));o.classList.add("fl-container"),this.appendNotification(t,o,n),this.renderProgressBar(o,n),this.handleClick(o)},t.prototype.appendNotification=function(t,e,n){"bottom"===n.direction?t.append(e):t.prepend(e),n.rtl&&e.classList.add("fl-rtl"),setTimeout((function(){e.classList.add("fl-show")}),100)},t.prototype.removeNotification=function(t){var e=t.parentElement;t.classList.remove("fl-show"),t.addEventListener("transitionend",(function(){t.remove(),e.hasChildNodes()||e.remove()}))},t.prototype.handleClick=function(t){var e=this;t.addEventListener("click",(function(){return e.removeNotification(t)}))},t.prototype.renderProgressBar=function(t,e){var n=this;if(e.timeout&&!(e.timeout<=0)){var o=document.createElement("span");o.classList.add("fl-progress");var r=t.querySelector(".fl-progress-bar");r&&r.append(o);var i=1e3/e.fps,s=0,a=function(){var r=100*(1-i*((s+=1)/e.timeout));o.style.width="".concat(r,"%"),r<=0&&(clearInterval(c),n.removeNotification(t))},c=window.setInterval(a,i);t.addEventListener("mouseout",(function(){return c=window.setInterval(a,i)})),t.addEventListener("mouseover",(function(){return clearInterval(c)}))}},t.prototype.applyDarkMode=function(){if(!document.body.classList.contains("fl-dark-mode")&&!document.querySelector("style.flasher-js")){var t=[].concat(this.options.darkMode),e=t[0],n=t[1],o=void 0===n?".dark":n,r=".fl-main-container .fl-container.fl-flasher {background-color: rgb(15, 23, 42);color: rgb(255, 255, 255);}";r="media"===e?"@media (prefers-color-scheme: dark) {".concat(r,"}"):"".concat(o," ").concat(r);var i=document.createElement("style");i.type="text/css",i.classList.add("flasher-js"),i.appendChild(document.createTextNode(r)),document.head.appendChild(i),document.body.classList.add("fl-dark-mode")}},t.prototype.stringToHTML=function(t){var e=function(){if(!DOMParser)return!1;var t=new DOMParser;try{t.parseFromString("x","text/html")}catch(t){return!1}return!0}();if(e)return(new DOMParser).parseFromString(t,"text/html").body.firstChild;var n=document.createElement("div");return n.innerHTML=t,n.firstElementChild},t}(),n=new(function(){function n(){this.defaultHandler="theme.flasher",this.factories=new Map,this.themes=new Map}return n.prototype.success=function(t,e,n){this.flash("success",t,e,n)},n.prototype.info=function(t,e,n){this.flash("info",t,e,n)},n.prototype.warning=function(t,e,n){this.flash("warning",t,e,n)},n.prototype.error=function(t,e,n){this.flash("error",t,e,n)},n.prototype.flash=function(t,e,n,o){var r=this.createNotification(t,e,n,o),i=this.create(this.defaultHandler);i.renderOptions({}),i.render({notification:r})},n.prototype.createNotification=function(t,e,n,o){if("object"==typeof t?(t=(o=t).type,e=o.message,n=o.title):"object"==typeof e?(e=(o=e).message,n=o.title):"object"==typeof n&&(n=(o=n).title),void 0===e)throw new Error("message option is required");return{type:t||"info",message:e,title:n,options:o}},n.prototype.create=function(t){t=this.resolveHandler(t),this.resolveThemeHandler(t);var e=this.factories.get(t);if(!e)throw new Error('Unable to resolve "'.concat(t,'" notification factory, did you forget to register it?'));return e},n.prototype.renderOptions=function(t){var e=this;Object.entries(t).forEach((function(t){var n=t[0],o=t[1];e.create(n).renderOptions(o)}))},n.prototype.render=function(t){var e=this;t=this.resolveResponse(t),this.addStyles(t.styles,(function(){e.addScripts(t.scripts,(function(){e.renderOptions(t.options),e.renderEnvelopes(t.envelopes,t.context)}))}))},n.prototype.addFactory=function(t,e){this.factories.set(t,e)},n.prototype.addTheme=function(t,e){this.themes.set(t,e)},n.prototype.using=function(t){return this.defaultHandler=t,this},n.prototype.addStyles=function(t,e){var n=this;if(0!==t.length)if(null===document.querySelector('link[href="'.concat(t[0],'"]'))){var o=document.createElement("link");o.setAttribute("href",t[0]),o.setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.onload=function(){return n.addStyles(t.slice(1),e)},document.head.appendChild(o)}else this.addStyles(t.slice(1),e);else"function"==typeof e&&e()},n.prototype.addScripts=function(t,e){var n=this;if(0!==t.length)if(null===document.querySelector('script[src="'.concat(t[0],'"]'))){var o=document.createElement("script");o.setAttribute("src",t[0]),o.setAttribute("type","text/javascript"),o.onload=function(){return n.addScripts(t.slice(1),e)},document.head.appendChild(o)}else this.addScripts(t.slice(1),e);else"function"==typeof e&&e()},n.prototype.renderEnvelopes=function(t,e){var n=this,o=new Map;t.forEach((function(t){t.context=Object.assign({},t.context||{},e),t.handler=n.resolveHandler(t.handler);var r=n.create(t.handler);n.isQueueable(r)?(o.get(t.handler)||r.resetQueue(),r.addEnvelope(t),o.set(t.handler,r)):r.render(t)})),o.forEach((function(t){return t.renderQueue()}))},n.prototype.isQueueable=function(t){return"function"==typeof t.addEnvelope&&"function"==typeof t.renderQueue},n.prototype.resolveResponse=function(t){var e=this;return t.envelopes=t.envelopes||[],t.options=t.options||{},t.scripts=t.scripts||[],t.styles=t.styles||[],t.context=t.context||{},Object.entries(t.options).forEach((function(n){var o=n[0],r=n[1];t.options[o]=e.parseOptions(r)})),t.envelopes.forEach((function(n){n.handler=e.resolveHandler(n.handler),n.notification.options=e.parseOptions(n.notification.options||{}),e.pushStyles(t,n.handler)})),t},n.prototype.parseOptions=function(t){var e=this;return Object.entries(t).forEach((function(n){var o=n[0],r=n[1];t[o]=e.parseFunction(r)})),t},n.prototype.parseFunction=function(e){var n,o;if("string"!=typeof e)return e;var r=e.match(/^function(?:.+)?(?:\s+)?\((.+)?\)(?:\s+|\n+)?{(?:\s+|\n+)?((?:.|\n)+)}$/m);if(!r)return e;var i=null!==(o=null===(n=r[1])||void 0===n?void 0:n.split(",").map((function(t){return t.trim()})))&&void 0!==o?o:[],s=r[2];return new(Function.bind.apply(Function,t(t([void 0],i,!1),[s],!1)))},n.prototype.pushStyles=function(t,e){var n;e=e.replace("theme.","");var o=(null===(n=this.themes.get(e))||void 0===n?void 0:n.styles)||[];t.styles=t.styles.concat(o).filter((function(t,e,n){return n.indexOf(t)===e}))},n.prototype.resolveHandler=function(t){return t=t||this.defaultHandler,["flasher","theme","template"].includes(t)&&(t="theme.flasher"),t=t.replace("template.","theme.")},n.prototype.resolveThemeHandler=function(t){if(!this.factories.get(t)&&0===t.indexOf("theme.")){var n=this.themes.get(t.replace("theme.",""));n&&this.addFactory(t,new e(n))}},n}());return n.addTheme("flasher",{render:function(t){var e,n=t.notification;return'<div class="fl-flasher fl-'+n.type+'"><div class="fl-content"><div class="fl-icon"></div><div><strong class="fl-title">'+(null!==(e=n.title)&&void 0!==e?e:n.type)+'</strong><span class="fl-message">'+n.message+'</span></div></div><span class="fl-progress-bar"></span></div>'}}),n}));
=======
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).flasher=t()}(this,(function(){"use strict";var e=[],t=[];!function(n,r){if(n&&"undefined"!=typeof document){var o,i=!0===r.prepend?"prepend":"append",a=!0===r.singleTag,l="string"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName("head")[0];if(a){var s=e.indexOf(l);-1===s&&(s=e.push(l)-1,t[s]={}),o=t[s]&&t[s][i]?t[s][i]:t[s][i]=f()}else o=f();65279===n.charCodeAt(0)&&(n=n.substring(1)),o.styleSheet?o.styleSheet.cssText+=n:o.appendChild(document.createTextNode(n))}function f(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var o="prepend"===i?"afterbegin":"beforeend";return l.insertAdjacentElement(o,e),e}}('.fl-main-container{position:fixed;transition:all 1s ease-in-out;width:24em;z-index:99999}@media only screen and (max-width:480px){.fl-main-container{left:.5em;right:.5em;width:auto}}.fl-main-container[data-position^=top-]{top:.5em}.fl-main-container[data-position^=bottom-]{bottom:.5em}.fl-main-container[data-position$=-right]{right:.5em}.fl-main-container[data-position$=-right] .fl-container{transform:translateX(110%)}.fl-main-container[data-position$=-left]{left:.5em}.fl-main-container[data-position$=-left] .fl-container{transform:translateX(-110%)}.fl-main-container[data-position$=-center]{left:50%;transform:translateX(-50%)}.fl-main-container[data-position=top-center] .fl-container{transform:translateY(-100vh)}.fl-main-container[data-position=bottom-center] .fl-container{transform:translateY(100vh)}.fl-main-container .fl-container{transition:transform .3s ease-in-out}.fl-main-container .fl-container.fl-show{transform:translate(0)}.fl-main-container .fl-container .fl-progress-bar{display:flex;height:.125em;margin-left:-1px}.fl-main-container .fl-container.fl-rtl{direction:rtl}.fl-main-container .fl-container.fl-rtl .fl-progress-bar{margin-left:auto;margin-right:-1px}.fl-main-container .fl-container.fl-success .fl-icon{background-color:#059669}.fl-main-container .fl-container.fl-success .fl-progress-bar{background-color:#6dface}.fl-main-container .fl-container.fl-success .fl-progress-bar .fl-progress{background-color:#059669}.fl-main-container .fl-container.fl-flasher.fl-success{border-left:.8em solid #059669}.fl-main-container .fl-container.fl-flasher.fl-success.fl-rtl{border-left:none;border-right:.8em solid #059669}.fl-main-container .fl-container.fl-flasher.fl-success:not(.fl-rtl){border-left:.8em solid #059669;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-success .fl-title{color:#059669}.fl-main-container .fl-container.fl-info .fl-icon{background-color:#2563eb}.fl-main-container .fl-container.fl-info .fl-progress-bar{background-color:#e0e9fc}.fl-main-container .fl-container.fl-info .fl-progress-bar .fl-progress{background-color:#2563eb}.fl-main-container .fl-container.fl-flasher.fl-info{border-left:.8em solid #2563eb}.fl-main-container .fl-container.fl-flasher.fl-info.fl-rtl{border-left:none;border-right:.8em solid #2563eb}.fl-main-container .fl-container.fl-flasher.fl-info:not(.fl-rtl){border-left:.8em solid #2563eb;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-info .fl-title{color:#2563eb}.fl-main-container .fl-container.fl-warning .fl-icon{background-color:#d97706}.fl-main-container .fl-container.fl-warning .fl-progress-bar{background-color:#fdd8ae}.fl-main-container .fl-container.fl-warning .fl-progress-bar .fl-progress{background-color:#d97706}.fl-main-container .fl-container.fl-flasher.fl-warning{border-left:.8em solid #d97706}.fl-main-container .fl-container.fl-flasher.fl-warning.fl-rtl{border-left:none;border-right:.8em solid #d97706}.fl-main-container .fl-container.fl-flasher.fl-warning:not(.fl-rtl){border-left:.8em solid #d97706;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-warning .fl-title{color:#d97706}.fl-main-container .fl-container.fl-error .fl-icon{background-color:#dc2626}.fl-main-container .fl-container.fl-error .fl-progress-bar{background-color:#f8d6d6}.fl-main-container .fl-container.fl-error .fl-progress-bar .fl-progress{background-color:#dc2626}.fl-main-container .fl-container.fl-flasher.fl-error{border-left:.8em solid #dc2626}.fl-main-container .fl-container.fl-flasher.fl-error.fl-rtl{border-left:none;border-right:.8em solid #dc2626}.fl-main-container .fl-container.fl-flasher.fl-error:not(.fl-rtl){border-left:.8em solid #dc2626;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-error .fl-title{color:#dc2626}.fl-main-container .fl-container .fl-icon{border-radius:50%;box-sizing:border-box;color:#fff;display:inline-block;height:1em;margin:0;min-height:1em;min-width:1em;position:relative;transition:all 1s;width:1em}.fl-main-container .fl-container .fl-icon:after,.fl-main-container .fl-container .fl-icon:before{border-width:0;box-sizing:border-box;content:"";position:absolute;transition:all 1s}.fl-main-container .fl-container.fl-success .fl-icon:after,.fl-main-container .fl-container.fl-success .fl-icon:before{background-color:currentColor;border-radius:.1em;height:.6em;left:.35em;top:.6em;transform:rotate(-135deg);transform-origin:.08em .08em;width:.16em}.fl-main-container .fl-container.fl-success .fl-icon:after{height:.16em;width:.4em}.fl-main-container .fl-container.fl-info .fl-icon:after,.fl-main-container .fl-container.fl-info .fl-icon:before{background-color:currentColor;border-radius:.03em;left:50%;transform:translateX(-50%);width:.15em}.fl-main-container .fl-container.fl-info .fl-icon:before{height:.38em;top:.4em}.fl-main-container .fl-container.fl-info .fl-icon:after{box-shadow:-.06em .19em,-.06em .44em,.06em .44em;height:.13em;top:.21em}.fl-main-container .fl-container.fl-warning .fl-icon:after,.fl-main-container .fl-container.fl-warning .fl-icon:before{background-color:currentColor;border-radius:.03em;left:50%;transform:translateX(-50%);width:.15em}.fl-main-container .fl-container.fl-warning .fl-icon:before{height:.38em;top:.21em}.fl-main-container .fl-container.fl-warning .fl-icon:after{height:.13em;top:.65em}.fl-main-container .fl-container.fl-error .fl-icon:after,.fl-main-container .fl-container.fl-error .fl-icon:before{background-color:currentColor;border-radius:.1em;height:.7em;left:50%;top:50%;transform:translate(-50%,-50%) rotate(-135deg);width:.16em}.fl-main-container .fl-container.fl-error .fl-icon:after{transform:translate(-50%,-50%) rotate(-45deg)}.fl-main-container .fl-container.fl-flasher{background-color:#fff;box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);color:#4b5563;cursor:pointer;line-height:1.5;margin-top:.5em;word-break:break-word}.fl-main-container .fl-container.fl-flasher.fl-rtl{border-radius:0 .375em .375em 0}.fl-main-container .fl-container.fl-flasher:not(.fl-rtl){border-radius:.375em 0 0 .375em}.fl-main-container .fl-container.fl-flasher .fl-content{align-items:center;display:flex;padding:.75em}.fl-main-container .fl-container.fl-flasher .fl-icon{font-size:2.5em}.fl-main-container .fl-container.fl-flasher .fl-message,.fl-main-container .fl-container.fl-flasher .fl-title{display:block;line-height:1.25em;margin-left:1em;margin-right:1em}.fl-main-container .fl-container.fl-flasher .fl-message:first-letter,.fl-main-container .fl-container.fl-flasher .fl-title:first-letter{text-transform:uppercase}.fl-main-container .fl-container.fl-flasher .fl-title{font-size:1em;font-weight:700}.fl-main-container .fl-container.fl-flasher .fl-message{font-size:.875em;margin-top:.25em}',{});class n{constructor(e){this.options={timeout:5e3,fps:30,position:"top-right",direction:"top",rtl:!1,style:{},darkMode:"media"},this.viewFactory=e}success(e,t,n){this.flash("success",e,t,n)}info(e,t,n){this.flash("info",e,t,n)}warning(e,t,n){this.flash("warning",e,t,n)}error(e,t,n){this.flash("error",e,t,n)}flash(e,t,n,r){const o=this.createNotification(e,t,n,r);this.renderOptions({}),this.render({notification:o})}createNotification(e,t,n,r){if("object"==typeof e?(e=(r=e).type,t=r.message,n=r.title):"object"==typeof t?(t=(r=t).message,n=r.title):"object"==typeof n&&(n=(r=n).title),void 0===t)throw new Error("message option is required");return{type:e||"info",message:t,title:n,options:r}}render(e){const{notification:t}=e,n=t.options||{},r=Array.isArray(n)?this.options:Object.assign({},this.options,n),o=()=>{const t=this.createContainer(r);this.addToContainer(t,e,r)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}renderOptions(e){this.options=Object.assign({},this.options,e),this.applyDarkMode()}createContainer(e){const t=`.fl-main-container[data-position="${e.position}"]`;let n=document.querySelector(t);return n?(n.dataset.turboCache="false",n):(n=document.createElement("div"),n.classList.add("fl-main-container"),n.dataset.position=e.position,n.dataset.turboCache="false",Object.keys(e.style).forEach((t=>{n?.style.setProperty(t,e.style[t])})),document.body.append(n),n)}addToContainer(e,t,n){const r=this.stringToHTML(t.template||this.viewFactory.render(t));r.classList.add("fl-container"),this.appendNotification(e,r,n),this.renderProgressBar(r,n),this.handleClick(r)}appendNotification(e,t,n){"bottom"===n.direction?e.append(t):e.prepend(t),n.rtl&&t.classList.add("fl-rtl"),setTimeout((()=>{t.classList.add("fl-show")}),100)}removeNotification(e){const t=e.parentElement;e.classList.remove("fl-show"),e.addEventListener("transitionend",(()=>{e.remove(),t.hasChildNodes()||t.remove()}))}handleClick(e){e.addEventListener("click",(()=>this.removeNotification(e)))}renderProgressBar(e,t){if(!t.timeout||t.timeout<=0)return;const n=document.createElement("span");n.classList.add("fl-progress");const r=e.querySelector(".fl-progress-bar");r&&r.append(n);const o=1e3/t.fps;let i=0;const a=()=>{i+=1;const r=100*(1-o*(i/t.timeout));n.style.width=`${r}%`,r<=0&&(clearInterval(l),this.removeNotification(e))};let l=window.setInterval(a,o);e.addEventListener("mouseout",(()=>l=window.setInterval(a,o))),e.addEventListener("mouseover",(()=>clearInterval(l)))}applyDarkMode(){if(document.body.classList.contains("fl-dark-mode")||document.querySelector("style.flasher-js"))return;let[e,t=".dark"]=[].concat(this.options.darkMode),n=".fl-main-container .fl-container.fl-flasher {background-color: rgb(15, 23, 42);color: rgb(255, 255, 255);}";n="media"===e?`@media (prefers-color-scheme: dark) {${n}}`:`${t} ${n}`;const r=document.createElement("style");r.type="text/css",r.classList.add("flasher-js"),r.appendChild(document.createTextNode(n)),document.head.appendChild(r),document.body.classList.add("fl-dark-mode")}stringToHTML(e){if((()=>{if(!DOMParser)return!1;const e=new DOMParser;try{e.parseFromString("x","text/html")}catch(e){return!1}return!0})()){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}}const r=new class{constructor(){this.defaultHandler="theme.flasher",this.factories=new Map,this.themes=new Map}success(e,t,n){this.flash("success",e,t,n)}info(e,t,n){this.flash("info",e,t,n)}warning(e,t,n){this.flash("warning",e,t,n)}error(e,t,n){this.flash("error",e,t,n)}flash(e,t,n,r){const o=this.createNotification(e,t,n,r),i=this.create(this.defaultHandler);i.renderOptions({}),i.render({notification:o})}createNotification(e,t,n,r){if("object"==typeof e?(e=(r=e).type,t=r.message,n=r.title):"object"==typeof t?(t=(r=t).message,n=r.title):"object"==typeof n&&(n=(r=n).title),void 0===t)throw new Error("message option is required");return{type:e||"info",message:t,title:n,options:r}}create(e){e=this.resolveHandler(e),this.resolveThemeHandler(e);const t=this.factories.get(e);if(!t)throw new Error(`Unable to resolve "${e}" notification factory, did you forget to register it?`);return t}renderOptions(e){Object.entries(e).forEach((([e,t])=>{this.create(e).renderOptions(t)}))}render(e){e=this.resolveResponse(e),this.addStyles(e.styles,(()=>{this.addScripts(e.scripts,(()=>{this.renderOptions(e.options),this.renderEnvelopes(e.envelopes,e.context)}))}))}addFactory(e,t){this.factories.set(e,t)}addTheme(e,t){this.themes.set(e,t)}using(e){return this.defaultHandler=e,this}addStyles(e,t){if(0===e.length)return void("function"==typeof t&&t());if(null!==document.querySelector(`link[href="${e[0]}"]`))return void this.addStyles(e.slice(1),t);const n=document.createElement("link");n.setAttribute("href",e[0]),n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.onload=()=>this.addStyles(e.slice(1),t),document.head.appendChild(n)}addScripts(e,t){if(0===e.length)return void("function"==typeof t&&t());if(null!==document.querySelector(`script[src="${e[0]}"]`))return void this.addScripts(e.slice(1),t);const n=document.createElement("script");n.setAttribute("src",e[0]),n.setAttribute("type","text/javascript"),n.onload=()=>this.addScripts(e.slice(1),t),document.head.appendChild(n)}renderEnvelopes(e,t){const n=new Map;e.forEach((e=>{e.context=Object.assign({},e.context||{},t),e.handler=this.resolveHandler(e.handler);const r=this.create(e.handler);this.isQueueable(r)?(n.get(e.handler)||r.resetQueue(),r.addEnvelope(e),n.set(e.handler,r)):r.render(e)})),n.forEach((e=>e.renderQueue()))}isQueueable(e){return"function"==typeof e.addEnvelope&&"function"==typeof e.renderQueue}resolveResponse(e){return e.envelopes=e.envelopes||[],e.options=e.options||{},e.scripts=e.scripts||[],e.styles=e.styles||[],e.context=e.context||{},Object.entries(e.options).forEach((([t,n])=>{e.options[t]=this.parseOptions(n)})),e.envelopes.forEach((t=>{t.handler=this.resolveHandler(t.handler),t.notification.options=this.parseOptions(t.notification.options||{}),this.pushStyles(e,t.handler)})),e}parseOptions(e){return Object.entries(e).forEach((([t,n])=>{e[t]=this.parseFunction(n)})),e}parseFunction(e){if("string"!=typeof e)return e;const t=e.match(/^function(?:.+)?(?:\s+)?\((.+)?\)(?:\s+|\n+)?{(?:\s+|\n+)?((?:.|\n)+)}$/m);if(!t)return e;const n=t[1]?.split(",").map((e=>e.trim()))??[],r=t[2];return new Function(...n,r)}pushStyles(e,t){t=t.replace("theme.","");const n=this.themes.get(t)?.styles||[];e.styles=e.styles.concat(n).filter(((e,t,n)=>n.indexOf(e)===t))}resolveHandler(e){return e=e||this.defaultHandler,["flasher","theme","template"].includes(e)&&(e="theme.flasher"),e=e.replace("template.","theme.")}resolveThemeHandler(e){if(this.factories.get(e))return;if(0!==e.indexOf("theme."))return;let t=this.themes.get(e.replace("theme.",""));t&&this.addFactory(e,new n(t))}};return r.addTheme("flasher",{render:e=>{const t=e.notification;return'<div class="fl-flasher fl-'+t.type+'"><div class="fl-content"><div class="fl-icon"></div><div><strong class="fl-title">'+(t.title??t.type)+'</strong><span class="fl-message">'+t.message+'</span></div></div><span class="fl-progress-bar"></span></div>'}}),r}));
>>>>>>> 37c201a (Wip)
=======
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).flasher=t()}(this,(function(){"use strict";var e=[],t=[];!function(n,r){if(n&&"undefined"!=typeof document){var o,i=!0===r.prepend?"prepend":"append",a=!0===r.singleTag,l="string"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName("head")[0];if(a){var s=e.indexOf(l);-1===s&&(s=e.push(l)-1,t[s]={}),o=t[s]&&t[s][i]?t[s][i]:t[s][i]=f()}else o=f();65279===n.charCodeAt(0)&&(n=n.substring(1)),o.styleSheet?o.styleSheet.cssText+=n:o.appendChild(document.createTextNode(n))}function f(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var o="prepend"===i?"afterbegin":"beforeend";return l.insertAdjacentElement(o,e),e}}('.fl-main-container{position:fixed;transition:all 1s ease-in-out;width:24em;z-index:99999}@media only screen and (max-width:480px){.fl-main-container{left:.5em;right:.5em;width:auto}}.fl-main-container[data-position^=top-]{top:.5em}.fl-main-container[data-position^=bottom-]{bottom:.5em}.fl-main-container[data-position$=-right]{right:.5em}.fl-main-container[data-position$=-right] .fl-container{transform:translateX(110%)}.fl-main-container[data-position$=-left]{left:.5em}.fl-main-container[data-position$=-left] .fl-container{transform:translateX(-110%)}.fl-main-container[data-position$=-center]{left:50%;transform:translateX(-50%)}.fl-main-container[data-position=top-center] .fl-container{transform:translateY(-100vh)}.fl-main-container[data-position=bottom-center] .fl-container{transform:translateY(100vh)}.fl-main-container .fl-container{transition:transform .3s ease-in-out}.fl-main-container .fl-container.fl-show{transform:translate(0)}.fl-main-container .fl-container .fl-progress-bar{display:flex;height:.125em;margin-left:-1px}.fl-main-container .fl-container.fl-rtl{direction:rtl}.fl-main-container .fl-container.fl-rtl .fl-progress-bar{margin-left:auto;margin-right:-1px}.fl-main-container .fl-container.fl-success .fl-icon{background-color:#059669}.fl-main-container .fl-container.fl-success .fl-progress-bar{background-color:#6dface}.fl-main-container .fl-container.fl-success .fl-progress-bar .fl-progress{background-color:#059669}.fl-main-container .fl-container.fl-flasher.fl-success{border-left:.8em solid #059669}.fl-main-container .fl-container.fl-flasher.fl-success.fl-rtl{border-left:none;border-right:.8em solid #059669}.fl-main-container .fl-container.fl-flasher.fl-success:not(.fl-rtl){border-left:.8em solid #059669;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-success .fl-title{color:#059669}.fl-main-container .fl-container.fl-info .fl-icon{background-color:#2563eb}.fl-main-container .fl-container.fl-info .fl-progress-bar{background-color:#e0e9fc}.fl-main-container .fl-container.fl-info .fl-progress-bar .fl-progress{background-color:#2563eb}.fl-main-container .fl-container.fl-flasher.fl-info{border-left:.8em solid #2563eb}.fl-main-container .fl-container.fl-flasher.fl-info.fl-rtl{border-left:none;border-right:.8em solid #2563eb}.fl-main-container .fl-container.fl-flasher.fl-info:not(.fl-rtl){border-left:.8em solid #2563eb;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-info .fl-title{color:#2563eb}.fl-main-container .fl-container.fl-warning .fl-icon{background-color:#d97706}.fl-main-container .fl-container.fl-warning .fl-progress-bar{background-color:#fdd8ae}.fl-main-container .fl-container.fl-warning .fl-progress-bar .fl-progress{background-color:#d97706}.fl-main-container .fl-container.fl-flasher.fl-warning{border-left:.8em solid #d97706}.fl-main-container .fl-container.fl-flasher.fl-warning.fl-rtl{border-left:none;border-right:.8em solid #d97706}.fl-main-container .fl-container.fl-flasher.fl-warning:not(.fl-rtl){border-left:.8em solid #d97706;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-warning .fl-title{color:#d97706}.fl-main-container .fl-container.fl-error .fl-icon{background-color:#dc2626}.fl-main-container .fl-container.fl-error .fl-progress-bar{background-color:#f8d6d6}.fl-main-container .fl-container.fl-error .fl-progress-bar .fl-progress{background-color:#dc2626}.fl-main-container .fl-container.fl-flasher.fl-error{border-left:.8em solid #dc2626}.fl-main-container .fl-container.fl-flasher.fl-error.fl-rtl{border-left:none;border-right:.8em solid #dc2626}.fl-main-container .fl-container.fl-flasher.fl-error:not(.fl-rtl){border-left:.8em solid #dc2626;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-error .fl-title{color:#dc2626}.fl-main-container .fl-container .fl-icon{border-radius:50%;box-sizing:border-box;color:#fff;display:inline-block;height:1em;margin:0;min-height:1em;min-width:1em;position:relative;transition:all 1s;width:1em}.fl-main-container .fl-container .fl-icon:after,.fl-main-container .fl-container .fl-icon:before{border-width:0;box-sizing:border-box;content:"";position:absolute;transition:all 1s}.fl-main-container .fl-container.fl-success .fl-icon:after,.fl-main-container .fl-container.fl-success .fl-icon:before{background-color:currentColor;border-radius:.1em;height:.6em;left:.35em;top:.6em;transform:rotate(-135deg);transform-origin:.08em .08em;width:.16em}.fl-main-container .fl-container.fl-success .fl-icon:after{height:.16em;width:.4em}.fl-main-container .fl-container.fl-info .fl-icon:after,.fl-main-container .fl-container.fl-info .fl-icon:before{background-color:currentColor;border-radius:.03em;left:50%;transform:translateX(-50%);width:.15em}.fl-main-container .fl-container.fl-info .fl-icon:before{height:.38em;top:.4em}.fl-main-container .fl-container.fl-info .fl-icon:after{box-shadow:-.06em .19em,-.06em .44em,.06em .44em;height:.13em;top:.21em}.fl-main-container .fl-container.fl-warning .fl-icon:after,.fl-main-container .fl-container.fl-warning .fl-icon:before{background-color:currentColor;border-radius:.03em;left:50%;transform:translateX(-50%);width:.15em}.fl-main-container .fl-container.fl-warning .fl-icon:before{height:.38em;top:.21em}.fl-main-container .fl-container.fl-warning .fl-icon:after{height:.13em;top:.65em}.fl-main-container .fl-container.fl-error .fl-icon:after,.fl-main-container .fl-container.fl-error .fl-icon:before{background-color:currentColor;border-radius:.1em;height:.7em;left:50%;top:50%;transform:translate(-50%,-50%) rotate(-135deg);width:.16em}.fl-main-container .fl-container.fl-error .fl-icon:after{transform:translate(-50%,-50%) rotate(-45deg)}.fl-main-container .fl-container.fl-flasher{background-color:#fff;box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);color:#4b5563;cursor:pointer;line-height:1.5;margin-top:.5em;word-break:break-word}.fl-main-container .fl-container.fl-flasher.fl-rtl{border-radius:0 .375em .375em 0}.fl-main-container .fl-container.fl-flasher:not(.fl-rtl){border-radius:.375em 0 0 .375em}.fl-main-container .fl-container.fl-flasher .fl-content{align-items:center;display:flex;padding:.75em}.fl-main-container .fl-container.fl-flasher .fl-icon{font-size:2.5em}.fl-main-container .fl-container.fl-flasher .fl-message,.fl-main-container .fl-container.fl-flasher .fl-title{display:block;line-height:1.25em;margin-left:1em;margin-right:1em}.fl-main-container .fl-container.fl-flasher .fl-message:first-letter,.fl-main-container .fl-container.fl-flasher .fl-title:first-letter{text-transform:uppercase}.fl-main-container .fl-container.fl-flasher .fl-title{font-size:1em;font-weight:700}.fl-main-container .fl-container.fl-flasher .fl-message{font-size:.875em;margin-top:.25em}',{});class n{constructor(e){this.options={timeout:5e3,fps:30,position:"top-right",direction:"top",rtl:!1,style:{},darkMode:"media"},this.viewFactory=e}success(e,t,n){this.flash("success",e,t,n)}info(e,t,n){this.flash("info",e,t,n)}warning(e,t,n){this.flash("warning",e,t,n)}error(e,t,n){this.flash("error",e,t,n)}flash(e,t,n,r){const o=this.createNotification(e,t,n,r);this.renderOptions({}),this.render({notification:o})}createNotification(e,t,n,r){if("object"==typeof e?(e=(r=e).type,t=r.message,n=r.title):"object"==typeof t?(t=(r=t).message,n=r.title):"object"==typeof n&&(n=(r=n).title),void 0===t)throw new Error("message option is required");return{type:e||"info",message:t,title:n,options:r}}render(e){const{notification:t}=e,n=t.options||{},r=Array.isArray(n)?this.options:Object.assign({},this.options,n),o=()=>{const t=this.createContainer(r);this.addToContainer(t,e,r)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}renderOptions(e){this.options=Object.assign({},this.options,e),this.applyDarkMode()}createContainer(e){const t=`.fl-main-container[data-position="${e.position}"]`;let n=document.querySelector(t);return n?(n.dataset.turboCache="false",n):(n=document.createElement("div"),n.classList.add("fl-main-container"),n.dataset.position=e.position,n.dataset.turboCache="false",Object.keys(e.style).forEach((t=>{n?.style.setProperty(t,e.style[t])})),document.body.append(n),n)}addToContainer(e,t,n){const r=this.stringToHTML(t.template||this.viewFactory.render(t));r.classList.add("fl-container"),this.appendNotification(e,r,n),this.renderProgressBar(r,n),this.handleClick(r)}appendNotification(e,t,n){"bottom"===n.direction?e.append(t):e.prepend(t),n.rtl&&t.classList.add("fl-rtl"),setTimeout((()=>{t.classList.add("fl-show")}),100)}removeNotification(e){const t=e.parentElement;e.classList.remove("fl-show"),e.addEventListener("transitionend",(()=>{e.remove(),t.hasChildNodes()||t.remove()}))}handleClick(e){e.addEventListener("click",(()=>this.removeNotification(e)))}renderProgressBar(e,t){if(!t.timeout||t.timeout<=0)return;const n=document.createElement("span");n.classList.add("fl-progress");const r=e.querySelector(".fl-progress-bar");r&&r.append(n);const o=1e3/t.fps;let i=0;const a=()=>{i+=1;const r=100*(1-o*(i/t.timeout));n.style.width=`${r}%`,r<=0&&(clearInterval(l),this.removeNotification(e))};let l=window.setInterval(a,o);e.addEventListener("mouseout",(()=>l=window.setInterval(a,o))),e.addEventListener("mouseover",(()=>clearInterval(l)))}applyDarkMode(){if(document.body.classList.contains("fl-dark-mode")||document.querySelector("style.flasher-js"))return;const[e,t=".dark"]=[].concat(this.options.darkMode);let n=".fl-main-container .fl-container.fl-flasher {background-color: rgb(15, 23, 42);color: rgb(255, 255, 255);}";n="media"===e?`@media (prefers-color-scheme: dark) {${n}}`:`${t} ${n}`;const r=document.createElement("style");r.type="text/css",r.classList.add("flasher-js"),r.appendChild(document.createTextNode(n)),document.head.appendChild(r),document.body.classList.add("fl-dark-mode")}stringToHTML(e){if((()=>{if(!DOMParser)return!1;const e=new DOMParser;try{e.parseFromString("x","text/html")}catch(e){return!1}return!0})()){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}}const r=new class{constructor(){this.defaultHandler="theme.flasher",this.factories=new Map,this.themes=new Map}success(e,t,n){this.flash("success",e,t,n)}info(e,t,n){this.flash("info",e,t,n)}warning(e,t,n){this.flash("warning",e,t,n)}error(e,t,n){this.flash("error",e,t,n)}flash(e,t,n,r){const o=this.createNotification(e,t,n,r),i=this.create(this.defaultHandler);i.renderOptions({}),i.render({notification:o})}createNotification(e,t,n,r){if("object"==typeof e?(e=(r=e).type,t=r.message,n=r.title):"object"==typeof t?(t=(r=t).message,n=r.title):"object"==typeof n&&(n=(r=n).title),void 0===t)throw new Error("message option is required");return{type:e||"info",message:t,title:n,options:r}}create(e){e=this.resolveHandler(e),this.resolveThemeHandler(e);const t=this.factories.get(e);if(!t)throw new Error(`Unable to resolve "${e}" notification factory, did you forget to register it?`);return t}renderOptions(e){Object.entries(e).forEach((([e,t])=>{this.create(e).renderOptions(t)}))}render(e){e=this.resolveResponse(e),this.addStyles(e.styles,(()=>{this.addScripts(e.scripts,(()=>{this.renderOptions(e.options),this.renderEnvelopes(e.envelopes,e.context)}))}))}addFactory(e,t){this.factories.set(e,t)}addTheme(e,t){this.themes.set(e,t)}using(e){return this.defaultHandler=e,this}addStyles(e,t){if(0===e.length)return void("function"==typeof t&&t());if(null!==document.querySelector(`link[href="${e[0]}"]`))return void this.addStyles(e.slice(1),t);const n=document.createElement("link");n.setAttribute("href",e[0]),n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.onload=()=>this.addStyles(e.slice(1),t),document.head.appendChild(n)}addScripts(e,t){if(0===e.length)return void("function"==typeof t&&t());if(null!==document.querySelector(`script[src="${e[0]}"]`))return void this.addScripts(e.slice(1),t);const n=document.createElement("script");n.setAttribute("src",e[0]),n.setAttribute("type","text/javascript"),n.onload=()=>this.addScripts(e.slice(1),t),document.head.appendChild(n)}renderEnvelopes(e,t){const n=new Map;e.forEach((e=>{e.context=Object.assign({},e.context||{},t),e.handler=this.resolveHandler(e.handler);const r=this.create(e.handler);this.isQueueable(r)?(n.get(e.handler)||r.resetQueue(),r.addEnvelope(e),n.set(e.handler,r)):r.render(e)})),n.forEach((e=>e.renderQueue()))}isQueueable(e){return"function"==typeof e.addEnvelope&&"function"==typeof e.renderQueue}resolveResponse(e){return e.envelopes=e.envelopes||[],e.options=e.options||{},e.scripts=e.scripts||[],e.styles=e.styles||[],e.context=e.context||{},Object.entries(e.options).forEach((([t,n])=>{e.options[t]=this.parseOptions(n)})),e.envelopes.forEach((t=>{t.handler=this.resolveHandler(t.handler),t.notification.options=this.parseOptions(t.notification.options||{}),this.pushStyles(e,t.handler)})),e}parseOptions(e){return Object.entries(e).forEach((([t,n])=>{e[t]=this.parseFunction(n)})),e}parseFunction(e){if("string"!=typeof e)return e;const t=e.match(/^function(?:.+)?(?:\s+)?\((.+)?\)(?:\s+|\n+)?{(?:\s+|\n+)?((?:.|\n)+)}$/m);if(!t)return e;const n=t[1]?.split(",").map((e=>e.trim()))??[],r=t[2];return new Function(...n,r)}pushStyles(e,t){t=t.replace("theme.","");const n=this.themes.get(t)?.styles||[];e.styles=e.styles.concat(n).filter(((e,t,n)=>n.indexOf(e)===t))}resolveHandler(e){return e=e||this.defaultHandler,["flasher","theme","template"].includes(e)&&(e="theme.flasher"),e=e.replace("template.","theme.")}resolveThemeHandler(e){if(this.factories.get(e))return;if(0!==e.indexOf("theme."))return;const t=this.themes.get(e.replace("theme.",""));t&&this.addFactory(e,new n(t))}};return r.addTheme("flasher",{render:e=>{const t=e.notification;return'<div class="fl-flasher fl-'+t.type+'"><div class="fl-content"><div class="fl-icon"></div><div><strong class="fl-title">'+(t.title??t.type)+'</strong><span class="fl-message">'+t.message+'</span></div></div><span class="fl-progress-bar"></span></div>'}}),r}));
>>>>>>> 697b1a2 (Wip)
=======
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).flasher=t()}(this,(function(){"use strict";var e=[],t=[];!function(n,r){if(n&&"undefined"!=typeof document){var o,i=!0===r.prepend?"prepend":"append",a=!0===r.singleTag,l="string"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName("head")[0];if(a){var s=e.indexOf(l);-1===s&&(s=e.push(l)-1,t[s]={}),o=t[s]&&t[s][i]?t[s][i]:t[s][i]=f()}else o=f();65279===n.charCodeAt(0)&&(n=n.substring(1)),o.styleSheet?o.styleSheet.cssText+=n:o.appendChild(document.createTextNode(n))}function f(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var o="prepend"===i?"afterbegin":"beforeend";return l.insertAdjacentElement(o,e),e}}('.fl-main-container{position:fixed;transition:all 1s ease-in-out;width:24em;z-index:99999}@media only screen and (max-width:480px){.fl-main-container{left:.5em;right:.5em;width:auto}}.fl-main-container[data-position^=top-]{top:.5em}.fl-main-container[data-position^=bottom-]{bottom:.5em}.fl-main-container[data-position$=-right]{right:.5em}.fl-main-container[data-position$=-right] .fl-container{transform:translateX(110%)}.fl-main-container[data-position$=-left]{left:.5em}.fl-main-container[data-position$=-left] .fl-container{transform:translateX(-110%)}.fl-main-container[data-position$=-center]{left:50%;transform:translateX(-50%)}.fl-main-container[data-position=top-center] .fl-container{transform:translateY(-100vh)}.fl-main-container[data-position=bottom-center] .fl-container{transform:translateY(100vh)}.fl-main-container .fl-container{transition:transform .3s ease-in-out}.fl-main-container .fl-container.fl-show{transform:translate(0)}.fl-main-container .fl-container .fl-progress-bar{display:flex;height:.125em;margin-left:-1px}.fl-main-container .fl-container.fl-rtl{direction:rtl}.fl-main-container .fl-container.fl-rtl .fl-progress-bar{margin-left:auto;margin-right:-1px}.fl-main-container .fl-container.fl-success .fl-icon{background-color:#059669}.fl-main-container .fl-container.fl-success .fl-progress-bar{background-color:#6dface}.fl-main-container .fl-container.fl-success .fl-progress-bar .fl-progress{background-color:#059669}.fl-main-container .fl-container.fl-flasher.fl-success{border-left:.8em solid #059669}.fl-main-container .fl-container.fl-flasher.fl-success.fl-rtl{border-left:none;border-right:.8em solid #059669}.fl-main-container .fl-container.fl-flasher.fl-success:not(.fl-rtl){border-left:.8em solid #059669;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-success .fl-title{color:#059669}.fl-main-container .fl-container.fl-info .fl-icon{background-color:#2563eb}.fl-main-container .fl-container.fl-info .fl-progress-bar{background-color:#e0e9fc}.fl-main-container .fl-container.fl-info .fl-progress-bar .fl-progress{background-color:#2563eb}.fl-main-container .fl-container.fl-flasher.fl-info{border-left:.8em solid #2563eb}.fl-main-container .fl-container.fl-flasher.fl-info.fl-rtl{border-left:none;border-right:.8em solid #2563eb}.fl-main-container .fl-container.fl-flasher.fl-info:not(.fl-rtl){border-left:.8em solid #2563eb;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-info .fl-title{color:#2563eb}.fl-main-container .fl-container.fl-warning .fl-icon{background-color:#d97706}.fl-main-container .fl-container.fl-warning .fl-progress-bar{background-color:#fdd8ae}.fl-main-container .fl-container.fl-warning .fl-progress-bar .fl-progress{background-color:#d97706}.fl-main-container .fl-container.fl-flasher.fl-warning{border-left:.8em solid #d97706}.fl-main-container .fl-container.fl-flasher.fl-warning.fl-rtl{border-left:none;border-right:.8em solid #d97706}.fl-main-container .fl-container.fl-flasher.fl-warning:not(.fl-rtl){border-left:.8em solid #d97706;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-warning .fl-title{color:#d97706}.fl-main-container .fl-container.fl-error .fl-icon{background-color:#dc2626}.fl-main-container .fl-container.fl-error .fl-progress-bar{background-color:#f8d6d6}.fl-main-container .fl-container.fl-error .fl-progress-bar .fl-progress{background-color:#dc2626}.fl-main-container .fl-container.fl-flasher.fl-error{border-left:.8em solid #dc2626}.fl-main-container .fl-container.fl-flasher.fl-error.fl-rtl{border-left:none;border-right:.8em solid #dc2626}.fl-main-container .fl-container.fl-flasher.fl-error:not(.fl-rtl){border-left:.8em solid #dc2626;border-right:none}.fl-main-container .fl-container.fl-flasher.fl-error .fl-title{color:#dc2626}.fl-main-container .fl-container .fl-icon{border-radius:50%;box-sizing:border-box;color:#fff;display:inline-block;height:1em;margin:0;min-height:1em;min-width:1em;position:relative;transition:all 1s;width:1em}.fl-main-container .fl-container .fl-icon:after,.fl-main-container .fl-container .fl-icon:before{border-width:0;box-sizing:border-box;content:"";position:absolute;transition:all 1s}.fl-main-container .fl-container.fl-success .fl-icon:after,.fl-main-container .fl-container.fl-success .fl-icon:before{background-color:currentColor;border-radius:.1em;height:.6em;left:.35em;top:.6em;transform:rotate(-135deg);transform-origin:.08em .08em;width:.16em}.fl-main-container .fl-container.fl-success .fl-icon:after{height:.16em;width:.4em}.fl-main-container .fl-container.fl-info .fl-icon:after,.fl-main-container .fl-container.fl-info .fl-icon:before{background-color:currentColor;border-radius:.03em;left:50%;transform:translateX(-50%);width:.15em}.fl-main-container .fl-container.fl-info .fl-icon:before{height:.38em;top:.4em}.fl-main-container .fl-container.fl-info .fl-icon:after{box-shadow:-.06em .19em,-.06em .44em,.06em .44em;height:.13em;top:.21em}.fl-main-container .fl-container.fl-warning .fl-icon:after,.fl-main-container .fl-container.fl-warning .fl-icon:before{background-color:currentColor;border-radius:.03em;left:50%;transform:translateX(-50%);width:.15em}.fl-main-container .fl-container.fl-warning .fl-icon:before{height:.38em;top:.21em}.fl-main-container .fl-container.fl-warning .fl-icon:after{height:.13em;top:.65em}.fl-main-container .fl-container.fl-error .fl-icon:after,.fl-main-container .fl-container.fl-error .fl-icon:before{background-color:currentColor;border-radius:.1em;height:.7em;left:50%;top:50%;transform:translate(-50%,-50%) rotate(-135deg);width:.16em}.fl-main-container .fl-container.fl-error .fl-icon:after{transform:translate(-50%,-50%) rotate(-45deg)}.fl-main-container .fl-container.fl-flasher{background-color:#fff;box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);color:#4b5563;cursor:pointer;line-height:1.5;margin-top:.5em;word-break:break-word}.fl-main-container .fl-container.fl-flasher.fl-rtl{border-radius:0 .375em .375em 0}.fl-main-container .fl-container.fl-flasher:not(.fl-rtl){border-radius:.375em 0 0 .375em}.fl-main-container .fl-container.fl-flasher .fl-content{align-items:center;display:flex;padding:.75em}.fl-main-container .fl-container.fl-flasher .fl-icon{font-size:2.5em}.fl-main-container .fl-container.fl-flasher .fl-message,.fl-main-container .fl-container.fl-flasher .fl-title{display:block;line-height:1.25em;margin-left:1em;margin-right:1em}.fl-main-container .fl-container.fl-flasher .fl-message:first-letter,.fl-main-container .fl-container.fl-flasher .fl-title:first-letter{text-transform:uppercase}.fl-main-container .fl-container.fl-flasher .fl-title{font-size:1em;font-weight:700}.fl-main-container .fl-container.fl-flasher .fl-message{font-size:.875em;margin-top:.25em}',{});class n{constructor(e){this.options={timeout:5e3,fps:30,position:"top-right",direction:"top",rtl:!1,style:{},darkMode:"media"},this.viewFactory=e}success(e,t,n){this.flash("success",e,t,n)}info(e,t,n){this.flash("info",e,t,n)}warning(e,t,n){this.flash("warning",e,t,n)}error(e,t,n){this.flash("error",e,t,n)}flash(e,t,n,r){const o=this.createNotification(e,t,n,r);this.renderOptions({}),this.render({notification:o})}createNotification(e,t,n,r){if("object"==typeof e?(e=(r=e).type,t=r.message,n=r.title):"object"==typeof t?(t=(r=t).message,n=r.title):"object"==typeof n&&(n=(r=n).title),void 0===t)throw new Error("message option is required");return{type:e||"info",message:t,title:n,options:r}}render(e){const{notification:t}=e,n=t.options||{},r=Array.isArray(n)?this.options:Object.assign({},this.options,n),o=()=>{const t=this.createContainer(r);this.addToContainer(t,e,r)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}renderOptions(e){this.options=Object.assign({},this.options,e),this.applyDarkMode()}createContainer(e){const t=`.fl-main-container[data-position="${e.position}"]`;let n=document.querySelector(t);return n?(n.dataset.turboCache="false",n):(n=document.createElement("div"),n.classList.add("fl-main-container"),n.dataset.position=e.position,n.dataset.turboCache="false",Object.keys(e.style).forEach((t=>{n?.style.setProperty(t,e.style[t])})),document.body.append(n),n)}addToContainer(e,t,n){const r=this.stringToHTML(t.template||this.viewFactory.render(t));r.classList.add("fl-container"),this.appendNotification(e,r,n),this.renderProgressBar(r,n),this.handleClick(r)}appendNotification(e,t,n){"bottom"===n.direction?e.append(t):e.prepend(t),n.rtl&&t.classList.add("fl-rtl"),setTimeout((()=>{t.classList.add("fl-show")}),100)}removeNotification(e){const t=e.parentElement;e.classList.remove("fl-show"),e.addEventListener("transitionend",(()=>{e.remove(),t.hasChildNodes()||t.remove()}))}handleClick(e){e.addEventListener("click",(()=>this.removeNotification(e)))}renderProgressBar(e,t){if(!t.timeout||t.timeout<=0)return;const n=document.createElement("span");n.classList.add("fl-progress");const r=e.querySelector(".fl-progress-bar");r&&r.append(n);const o=1e3/t.fps;let i=0;const a=()=>{i+=1;const r=100*(1-o*(i/t.timeout));n.style.width=`${r}%`,r<=0&&(clearInterval(l),this.removeNotification(e))};let l=window.setInterval(a,o);e.addEventListener("mouseout",(()=>l=window.setInterval(a,o))),e.addEventListener("mouseover",(()=>clearInterval(l)))}applyDarkMode(){if(document.body.classList.contains("fl-dark-mode")||document.querySelector("style.flasher-js"))return;const[e,t=".dark"]=[].concat(this.options.darkMode);let n=".fl-main-container .fl-container.fl-flasher {background-color: rgb(15, 23, 42);color: rgb(255, 255, 255);}";n="media"===e?`@media (prefers-color-scheme: dark) {${n}}`:`${t} ${n}`;const r=document.createElement("style");r.type="text/css",r.classList.add("flasher-js"),r.appendChild(document.createTextNode(n)),document.head.appendChild(r),document.body.classList.add("fl-dark-mode")}stringToHTML(e){if((()=>{if(!DOMParser)return!1;const e=new DOMParser;try{e.parseFromString("x","text/html")}catch(e){return!1}return!0})()){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}}const r=new class{constructor(){this.defaultHandler="theme.flasher",this.factories=new Map,this.themes=new Map}success(e,t,n){this.flash("success",e,t,n)}info(e,t,n){this.flash("info",e,t,n)}warning(e,t,n){this.flash("warning",e,t,n)}error(e,t,n){this.flash("error",e,t,n)}flash(e,t,n,r){const o=this.createNotification(e,t,n,r),i=this.create(this.defaultHandler);i.renderOptions({}),i.render({notification:o})}createNotification(e,t,n,r){if("object"==typeof e?(e=(r=e).type,t=r.message,n=r.title):"object"==typeof t?(t=(r=t).message,n=r.title):"object"==typeof n&&(n=(r=n).title),void 0===t)throw new Error("message option is required");return{type:e||"info",message:t,title:n,options:r}}create(e){e=this.resolveHandler(e),this.resolveThemeHandler(e);const t=this.factories.get(e);if(!t)throw new Error(`Unable to resolve "${e}" notification factory, did you forget to register it?`);return t}renderOptions(e){Object.entries(e).forEach((([e,t])=>{this.create(e).renderOptions(t)}))}render(e){e=this.resolveResponse(e),this.addStyles(e.styles,(()=>{this.addScripts(e.scripts,(()=>{this.renderOptions(e.options),this.renderEnvelopes(e.envelopes,e.context)}))}))}addFactory(e,t){this.factories.set(e,t)}addTheme(e,t){this.themes.set(e,t)}using(e){return this.defaultHandler=e,this}addStyles(e,t){if(0===e.length)return void("function"==typeof t&&t());if(null!==document.querySelector(`link[href="${e[0]}"]`))return void this.addStyles(e.slice(1),t);const n=document.createElement("link");n.setAttribute("href",e[0]),n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.onload=()=>this.addStyles(e.slice(1),t),document.head.appendChild(n)}addScripts(e,t){if(0===e.length)return void("function"==typeof t&&t());if(null!==document.querySelector(`script[src="${e[0]}"]`))return void this.addScripts(e.slice(1),t);const n=document.createElement("script");n.setAttribute("src",e[0]),n.setAttribute("type","text/javascript"),n.onload=()=>this.addScripts(e.slice(1),t),document.head.appendChild(n)}renderEnvelopes(e,t){const n=new Map;e.forEach((e=>{e.context={...e.context,...t},e.handler=this.resolveHandler(e.handler);const r=this.create(e.handler);this.isQueueable(r)?(n.get(e.handler)||r.resetQueue(),r.addEnvelope(e),n.set(e.handler,r)):r.render(e)})),n.forEach((e=>e.renderQueue()))}isQueueable(e){return"function"==typeof e.addEnvelope&&"function"==typeof e.renderQueue}resolveResponse(e){return e.envelopes=e.envelopes||[],e.options=e.options||{},e.scripts=e.scripts||[],e.styles=e.styles||[],e.context=e.context||{},Object.entries(e.options).forEach((([t,n])=>{e.options[t]=this.parseOptions(n)})),e.envelopes.forEach((t=>{t.handler=this.resolveHandler(t.handler),t.notification.options=this.parseOptions(t.notification.options||{}),this.pushStyles(e,t.handler)})),e}parseOptions(e){return Object.entries(e).forEach((([t,n])=>{e[t]=this.parseFunction(n)})),e}parseFunction(e){if("string"!=typeof e)return e;const t=e.match(/^function(?:.+)?(?:\s+)?\((.+)?\)(?:\s+|\n+)?{(?:\s+|\n+)?((?:.|\n)+)}$/m);if(!t)return e;const n=t[1]?.split(",").map((e=>e.trim()))??[],r=t[2];return new Function(...n,r)}pushStyles(e,t){t=t.replace("theme.","");const n=this.themes.get(t)?.styles||[];e.styles=Array.from(new Set([...e.styles,...n]))}resolveHandler(e){return e=e||this.defaultHandler,["flasher","theme","template"].includes(e)&&(e="theme.flasher"),e=e.replace("template.","theme.")}resolveThemeHandler(e){if(this.factories.get(e))return;if(0!==e.indexOf("theme."))return;const t=this.themes.get(e.replace("theme.",""));t&&this.addFactory(e,new n(t))}};return r.addTheme("flasher",{render:e=>{const t=e.notification;return'<div class="fl-flasher fl-'+t.type+'"><div class="fl-content"><div class="fl-icon"></div><div><strong class="fl-title">'+(t.title??t.type)+'</strong><span class="fl-message">'+t.message+'</span></div></div><span class="fl-progress-bar"></span></div>'}}),r}));
>>>>>>> 55493b0 (Wip)
